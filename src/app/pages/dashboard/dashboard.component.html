<app-navbar></app-navbar>

<div class="min-h-screen bg-gray-50 pt-24 pb-16">
  <div class="container mx-auto px-4">
    <h1 class="text-4xl font-bold text-gray-800 mb-8">My Dashboard</h1>

    <mat-tab-group class="dashboard-tabs">
      <!-- Upcoming Bookings -->
      <mat-tab label="Upcoming Bookings">
        <div class="py-8">
          <div *ngIf="upcomingBookings.length > 0" class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <mat-card *ngFor="let booking of upcomingBookings" class="p-6">
              <div class="flex justify-between items-start mb-4">
                <h3 class="text-xl font-semibold">{{ booking.tourTitle }}</h3>
                <span [class]="'px-3 py-1 rounded-full text-sm font-semibold ' + getStatusColor(booking.status)">
                  {{ booking.status | titlecase }}
                </span>
              </div>
              <div class="space-y-2 text-gray-600 mb-4">
                <div class="flex items-center">
                  <mat-icon class="text-sm mr-2">calendar_today</mat-icon>
                  <span>{{ booking.date }}</span>
                </div>
                <div class="flex items-center">
                  <mat-icon class="text-sm mr-2">people</mat-icon>
                  <span>{{ booking.participants }} participants</span>
                </div>
                <div class="flex items-center">
                  <mat-icon class="text-sm mr-2">payment</mat-icon>
                  <span>₹{{ booking.totalPrice }}</span>
                </div>
              </div>
              <button 
                *ngIf="booking.status === 'pending' || booking.status === 'confirmed'"
                mat-stroked-button 
                color="warn"
                (click)="cancelBooking(booking.id)">
                Cancel Booking
              </button>
            </mat-card>
          </div>
          <div *ngIf="upcomingBookings.length === 0" class="text-center py-16">
            <mat-icon class="text-6xl text-gray-400 mb-4">event_busy</mat-icon>
            <p class="text-gray-600">No upcoming bookings</p>
          </div>
        </div>
      </mat-tab>

      <!-- Past Bookings -->
      <mat-tab label="Past Bookings">
        <div class="py-8">
          <div *ngIf="pastBookings.length > 0" class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <mat-card *ngFor="let booking of pastBookings" class="p-6">
              <div class="flex justify-between items-start mb-4">
                <h3 class="text-xl font-semibold">{{ booking.tourTitle }}</h3>
                <span [class]="'px-3 py-1 rounded-full text-sm font-semibold ' + getStatusColor(booking.status)">
                  {{ booking.status | titlecase }}
                </span>
              </div>
              <div class="space-y-2 text-gray-600">
                <div class="flex items-center">
                  <mat-icon class="text-sm mr-2">calendar_today</mat-icon>
                  <span>{{ booking.date }}</span>
                </div>
                <div class="flex items-center">
                  <mat-icon class="text-sm mr-2">people</mat-icon>
                  <span>{{ booking.participants }} participants</span>
                </div>
                <div class="flex items-center">
                  <mat-icon class="text-sm mr-2">payment</mat-icon>
                  <span>₹{{ booking.totalPrice }}</span>
                </div>
              </div>
            </mat-card>
          </div>
          <div *ngIf="pastBookings.length === 0" class="text-center py-16">
            <mat-icon class="text-6xl text-gray-400 mb-4">history</mat-icon>
            <p class="text-gray-600">No past bookings</p>
          </div>
        </div>
      </mat-tab>

      <!-- Profile -->
      <mat-tab label="Profile">
        <div class="py-8 max-w-2xl">
          <mat-card class="p-6">
            <h2 class="text-2xl font-bold mb-6">My Profile</h2>
            <form [formGroup]="profileForm" (ngSubmit)="updateProfile()" class="space-y-6">
              <!-- Full Name Field -->
              <div>
                <label for="profile-name" class="block text-sm font-medium text-gray-700 mb-2">
                  Full Name *
                </label>
                <div class="relative">
                  <input
                    id="profile-name"
                    type="text"
                    formControlName="name"
                    placeholder="Enter your full name"
                    class="contact-input w-full px-4 py-3 pl-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-himalayan-blue focus:border-transparent transition-all duration-200 text-gray-900 placeholder-gray-500"
                    [class.border-red-300]="profileForm.get('name')?.invalid && profileForm.get('name')?.touched">
                  <mat-icon class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">person</mat-icon>
                </div>
                <p *ngIf="profileForm.get('name')?.invalid && profileForm.get('name')?.touched" class="mt-1 text-sm text-red-600">
                  Full name is required
                </p>
              </div>

              <!-- Email Field -->
              <div>
                <label for="profile-email" class="block text-sm font-medium text-gray-700 mb-2">
                  Email Address *
                </label>
                <div class="relative">
                  <input
                    id="profile-email"
                    type="email"
                    formControlName="email"
                    placeholder="your.email@example.com"
                    class="contact-input w-full px-4 py-3 pl-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-himalayan-blue focus:border-transparent transition-all duration-200 text-gray-900 placeholder-gray-500"
                    [class.border-red-300]="profileForm.get('email')?.invalid && profileForm.get('email')?.touched">
                  <mat-icon class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">email</mat-icon>
                </div>
                <p *ngIf="profileForm.get('email')?.invalid && profileForm.get('email')?.touched" class="mt-1 text-sm text-red-600">
                  <span *ngIf="profileForm.get('email')?.hasError('required')">Email address is required</span>
                  <span *ngIf="profileForm.get('email')?.hasError('email')">Please enter a valid email address</span>
                </p>
              </div>

              <!-- Phone Field -->
              <div>
                <label for="profile-phone" class="block text-sm font-medium text-gray-700 mb-2">
                  Phone Number *
                </label>
                <div class="relative">
                  <input
                    id="profile-phone"
                    type="tel"
                    formControlName="phone"
                    placeholder="+91 9876543210"
                    class="contact-input w-full px-4 py-3 pl-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-himalayan-blue focus:border-transparent transition-all duration-200 text-gray-900 placeholder-gray-500"
                    [class.border-red-300]="profileForm.get('phone')?.invalid && profileForm.get('phone')?.touched">
                  <mat-icon class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">phone</mat-icon>
                </div>
                <p *ngIf="profileForm.get('phone')?.invalid && profileForm.get('phone')?.touched" class="mt-1 text-sm text-red-600">
                  Phone number is required
                </p>
              </div>

              <!-- Submit Button -->
              <button
                type="submit"
                mat-raised-button
                class="language-selector-btn w-full"
                [disabled]="!profileForm.valid">
                <mat-icon class="mr-2">save</mat-icon>
                Update Profile
              </button>
            </form>
          </mat-card>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>

<app-footer></app-footer>









